{"version":3,"sources":["webpack:///js/pages/game-wuziqi.30284a1cdfe1e997d771.js","webpack:///./app/phone/assets/js/pages/game-wuziqi.js","webpack:///./app/phone/assets/audios/syllable ^\\.\\/.*\\.mp3$","webpack:///./app/phone/assets/audios/syllable/1.mp3","webpack:///./app/phone/assets/audios/syllable/2.mp3","webpack:///./app/phone/assets/audios/syllable/3.mp3","webpack:///./app/phone/assets/audios/syllable/4.mp3","webpack:///./app/phone/assets/audios/syllable/5.mp3","webpack:///./app/phone/assets/audios/syllable/6.mp3","webpack:///./app/phone/assets/audios/syllable/7.mp3"],"names":["webpackJsonp","104","module","exports","__webpack_require__","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","_createClass","defineProperties","target","props","i","length","descriptor","defineProperty","key","protoProps","staticProps","Super","_Super","Sub","this","getPrototypeOf","apply","arguments","window","orientation","alert","tools","applications","canvasWrap","document","querySelector","w","offsetWidth","h","documentElement","clientHeight","game","nextColor","blackNum","whiteNum","colWidth","padding","initY","map","Math","pow","x","y","floor","push","left","top","radius","type","canvas","createElement","elementName","attribute","width","height","ctx","getContext","drawLine","startX","startY","endX","endY","save","beginPath","strokeStyle","moveTo","lineTo","stroke","closePath","restore","drawCircle","r","fillStyle","arc","PI","fill","drawTxt","clearRect","font","textAlign","textBaseline","fillText","forEach","v","colNum","audioWrap","audioSrc","hasSound","classList","contains","addEventListener","toggle","ev","clientX","offset","clientY","nowX","nowY","audioDom","setAttribute","getRandom","play","result","str","victory","k","v1","v2","indexOf","setTimeout","location","reload","appendChild","105","21","webpackContext","req","webpackContextResolve","id","Error","./1.mp3","./2.mp3","./3.mp3","./4.mp3","./5.mp3","./6.mp3","./7.mp3","keys","resolve","22","p","23","24","25","26","27","28"],"mappings":"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","file":"js/pages/game-wuziqi.30284a1cdfe1e997d771.js","sourcesContent":["webpackJsonp([4],{\n\n/***/ 104:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n__webpack_require__(105);\nvar Super = __webpack_require__(3);\n\nvar Sub = function (_Super) {\n    _inherits(Sub, _Super);\n\n    function Sub() {\n        _classCallCheck(this, Sub);\n\n        return _possibleConstructorReturn(this, (Sub.__proto__ || Object.getPrototypeOf(Sub)).apply(this, arguments));\n    }\n\n    _createClass(Sub, [{\n        key: 'power',\n        value: function power() {\n            // 横屏的时候 90 -190 , 横屏的时候 0 180\n            if (window.orientation === 90 || window.orientation === -90) {\n                alert('请竖屏之后，刷新页面进行游戏');\n            }\n            var tools = this.tools;\n            var applications = this.applications;\n            var canvasWrap = document.querySelector('.canvas-wrap');\n            var w = canvasWrap.offsetWidth;\n            var h = document.documentElement.clientHeight;\n            var padding = 20.5;\n            var colNum = 15; // 正规应该是15列\n            var game = {\n                nextColor: 'black', // 下一颗棋子的颜色\n                blackNum: 0, // 黑色棋子个数\n                whiteNum: 0 // 白色棋子个数\n            };\n            var colWidth = (w - padding * 2) / (colNum - 1);\n            var initX = padding;\n            var initY = (h - w) / 2 + padding;\n            var map = [];\n            for (var i = 0; i < Math.pow(colNum, 2); i++) {\n                var x = i % colNum;\n                var y = Math.floor(i / colNum);\n                map.push({\n                    x: x,\n                    y: y,\n                    left: x * colWidth + initX,\n                    top: y * colWidth + initY,\n                    radius: colWidth / 2.4,\n                    type: 'transparent'\n                });\n            }\n            var canvas = applications.createElement({\n                elementName: 'canvas',\n                attribute: {\n                    width: w,\n                    height: h\n                }\n            });\n            var ctx = canvas.getContext('2d');\n            var drawLine = function drawLine(startX, startY, endX, endY) {\n                ctx.save();\n                ctx.beginPath();\n                ctx.strokeStyle = '#000';\n                ctx.moveTo(startX, startY);\n                ctx.lineTo(endX, endY);\n                ctx.stroke();\n                ctx.closePath();\n                ctx.restore();\n            };\n            var drawCircle = function drawCircle(x, y, r, fillStyle) {\n                ctx.save();\n                ctx.beginPath();\n                ctx.fillStyle = fillStyle;\n                ctx.arc(x, y, r, 0, Math.PI * 2, false);\n                ctx.fill();\n                ctx.closePath();\n                ctx.restore();\n            };\n            var drawTxt = function drawTxt() {\n                ctx.save();\n                ctx.beginPath();\n                ctx.clearRect(0, 0, w, initY / 1.4);\n                ctx.font = '16px 微软雅黑';\n                ctx.textAlign = 'center';\n                ctx.textBaseline = 'middle';\n                ctx.fillText('\\u8BF7' + (game.nextColor === 'black' ? '黑色' : '白色') + '\\u68CB\\u5B50\\u843D\\u5B50', w / 2, initY / 2);\n                ctx.closePath();\n                ctx.restore();\n            };\n            drawTxt();\n            var drawCoordinate = function drawCoordinate(v) {\n                ctx.save();\n                ctx.beginPath();\n                ctx.font = '10px 微软雅黑';\n                ctx.textAlign = 'center';\n                ctx.textBaseline = 'middle';\n                ctx.fillText(v.x + ',' + v.y, v.left, v.top);\n                ctx.closePath();\n                ctx.restore();\n            };\n            map.forEach(function (v, i) {\n                if (v.x === 0) {\n                    var target = map[i + colNum - 1];\n                    drawLine(v.left, v.top, target.left, target.top);\n                }\n                if (v.y === 0) {\n                    var _target = map[colNum * colNum - 1 - (colNum - 1) + v.x];\n                    drawLine(v.left, v.top, _target.left, _target.top);\n                }\n                if (i === Math.floor(map.length / 2)) {\n                    drawCircle(v.left, v.top, v.radius / 4, 'black');\n                }\n                // drawCoordinate(v); // 画坐标\n            });\n            // 声音\n            var audioWrap = document.querySelector('.audios-wrap');\n            var audioSrc = [];\n            for (var _i = 0; _i < 7; _i++) {\n                audioSrc.push(__webpack_require__(21)(\"./\" + (_i + 1) + '.mp3'));\n            }\n            var hasSound = audioWrap.classList.contains('_on');\n            audioWrap.addEventListener('click', function () {\n                hasSound = !hasSound;\n                this.classList.toggle('_on');\n            });\n            // 落子\n            canvas.addEventListener('click', function (ev) {\n                var clientX = ev.clientX - applications.offset(canvasWrap).left;\n                var clientY = ev.clientY;\n                var nowX = null;\n                var nowY = null;\n                map.forEach(function (v) {\n                    if (clientX >= v.left - v.radius && clientX <= v.left + v.radius && clientY >= v.top - v.radius && clientY <= v.top + v.radius) {\n                        // 判断点击范围是否是正确的区域\n                        if (v.type === 'transparent') {\n                            // 音乐\n                            if (hasSound) {\n                                var audioDom = applications.createElement({ elementName: 'audio' });\n                                // audioDom.setAttribute('src', audioSrc[(game.blackNum + game.whiteNum) % audioSrc.length]);\n                                audioDom.setAttribute('src', audioSrc[tools.getRandom(0, audioSrc.length - 1)]);\n                                audioDom.play();\n                                audioDom = null;\n                            }\n                            drawCircle(v.left, v.top, v.radius, game.nextColor);\n                            v.type = game.nextColor;\n                            nowX = v.x;\n                            nowY = v.y;\n                            if (game.nextColor === 'black') {\n                                game.blackNum++;\n                                game.nextColor = 'white';\n                            } else {\n                                game.whiteNum++;\n                                game.nextColor = 'black';\n                            }\n                        }\n                    }\n                });\n                // 提示信息\n                drawTxt();\n                // 判断输赢\n                var result = ['', '', '', ''];\n                map.forEach(function (v) {\n                    var str = '';\n                    if (v.type === 'transparent') {\n                        str = 't';\n                    }\n                    if (v.type === 'black') {\n                        str = 'b';\n                    }\n                    if (v.type === 'white') {\n                        str = 'w';\n                    }\n                    if (v.x === nowX) {\n                        //  垂直\n                        result[0] += str;\n                    }\n                    if (v.y === nowY) {\n                        //  水平\n                        result[1] += str;\n                    }\n                    if (v.x + v.y === nowX + nowY) {\n                        // 左斜\n                        result[2] += str;\n                    }\n                    if (v.x - v.y === nowX - nowY) {\n                        // 右斜\n                        result[3] += str;\n                    }\n                });\n                var victory = [{\n                    k: 'bbbbb',\n                    v: '黑棋获胜'\n                }, {\n                    k: 'wwwww',\n                    v: '白棋获胜'\n                }, {\n                    k: 'tbbbbt',\n                    v: '黑棋获胜'\n                }, {\n                    k: 'twwwwt',\n                    v: '白棋获胜'\n                }];\n                result.forEach(function (v1) {\n                    victory.forEach(function (v2) {\n                        if (v1.indexOf(v2.k) !== -1) {\n                            setTimeout(function () {\n                                alert(v2.v);\n                                window.location.reload();\n                            }, 60);\n                        }\n                    });\n                });\n            });\n            canvasWrap.appendChild(canvas);\n        }\n    }]);\n\n    return Sub;\n}(Super);\n\nnew Sub();\n\n/***/ }),\n\n/***/ 105:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 21:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar map = {\n\t\"./1.mp3\": 22,\n\t\"./2.mp3\": 23,\n\t\"./3.mp3\": 24,\n\t\"./4.mp3\": 25,\n\t\"./5.mp3\": 26,\n\t\"./6.mp3\": 27,\n\t\"./7.mp3\": 28\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) // check for number or string\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\treturn id;\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 21;\n\n/***/ }),\n\n/***/ 22:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"audios/1.38e46759.mp3\";\n\n/***/ }),\n\n/***/ 23:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"audios/2.5576c20e.mp3\";\n\n/***/ }),\n\n/***/ 24:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"audios/3.25e1d33d.mp3\";\n\n/***/ }),\n\n/***/ 25:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"audios/4.220478be.mp3\";\n\n/***/ }),\n\n/***/ 26:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"audios/5.ab15dc12.mp3\";\n\n/***/ }),\n\n/***/ 27:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"audios/6.44295654.mp3\";\n\n/***/ }),\n\n/***/ 28:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"audios/7.c04a5503.mp3\";\n\n/***/ })\n\n},[104]);\n\n\n// WEBPACK FOOTER //\n// js/pages/game-wuziqi.30284a1cdfe1e997d771.js","require('../../scss/pages/game-wuziqi.scss');\r\nconst Super = require('../pages-super/super');\r\n\r\nclass Sub extends Super {\r\n    power() {\r\n        // 横屏的时候 90 -190 , 横屏的时候 0 180\r\n        if (window.orientation === 90 || window.orientation === -90) {\r\n            alert('请竖屏之后，刷新页面进行游戏');\r\n        }\r\n        const tools = this.tools;\r\n        const applications = this.applications;\r\n        const canvasWrap = document.querySelector('.canvas-wrap');\r\n        const w = canvasWrap.offsetWidth;\r\n        const h = document.documentElement.clientHeight;\r\n        const padding = 20.5;\r\n        const colNum = 15; // 正规应该是15列\r\n        const game = {\r\n            nextColor: 'black', // 下一颗棋子的颜色\r\n            blackNum: 0, // 黑色棋子个数\r\n            whiteNum: 0, // 白色棋子个数\r\n        };\r\n        const colWidth = (w - padding * 2) / (colNum - 1);\r\n        const initX = padding;\r\n        const initY = (h - w) / 2 + padding;\r\n        const map = [];\r\n        for (let i = 0; i < Math.pow(colNum, 2); i++) {\r\n            const x = i % colNum;\r\n            const y = Math.floor(i / colNum);\r\n            map.push({\r\n                x: x,\r\n                y: y,\r\n                left: x * colWidth + initX,\r\n                top: y * colWidth + initY,\r\n                radius: colWidth / 2.4,\r\n                type: 'transparent',\r\n            });\r\n        }\r\n        const canvas = applications.createElement({\r\n            elementName: 'canvas',\r\n            attribute: {\r\n                width: w,\r\n                height: h,\r\n            },\r\n        });\r\n        const ctx = canvas.getContext('2d');\r\n        const drawLine = function (startX, startY, endX, endY) {\r\n            ctx.save();\r\n            ctx.beginPath();\r\n            ctx.strokeStyle = '#000';\r\n            ctx.moveTo(startX, startY);\r\n            ctx.lineTo(endX, endY);\r\n            ctx.stroke();\r\n            ctx.closePath();\r\n            ctx.restore();\r\n        };\r\n        const drawCircle = function (x, y, r, fillStyle) {\r\n            ctx.save();\r\n            ctx.beginPath();\r\n            ctx.fillStyle = fillStyle;\r\n            ctx.arc(x, y, r, 0, Math.PI * 2, false);\r\n            ctx.fill();\r\n            ctx.closePath();\r\n            ctx.restore();\r\n        };\r\n        const drawTxt = function () {\r\n            ctx.save();\r\n            ctx.beginPath();\r\n            ctx.clearRect(0, 0, w, initY / 1.4);\r\n            ctx.font = '16px 微软雅黑';\r\n            ctx.textAlign = 'center';\r\n            ctx.textBaseline = 'middle';\r\n            ctx.fillText(`请${game.nextColor === 'black' ? '黑色' : '白色'}棋子落子`, w / 2, initY / 2);\r\n            ctx.closePath();\r\n            ctx.restore();\r\n        };\r\n        drawTxt();\r\n        const drawCoordinate = function (v) {\r\n            ctx.save();\r\n            ctx.beginPath();\r\n            ctx.font = '10px 微软雅黑';\r\n            ctx.textAlign = 'center';\r\n            ctx.textBaseline = 'middle';\r\n            ctx.fillText(`${v.x},${v.y}`, v.left, v.top);\r\n            ctx.closePath();\r\n            ctx.restore();\r\n        };\r\n        map.forEach(function (v, i) {\r\n            if (v.x === 0) {\r\n                const target = map[i + colNum - 1];\r\n                drawLine(v.left, v.top, target.left, target.top);\r\n            }\r\n            if (v.y === 0) {\r\n                const target = map[(colNum * colNum - 1) - (colNum - 1) + v.x];\r\n                drawLine(v.left, v.top, target.left, target.top);\r\n            }\r\n            if (i === Math.floor(map.length / 2)) {\r\n                drawCircle(v.left, v.top, v.radius / 4, 'black');\r\n            }\r\n            // drawCoordinate(v); // 画坐标\r\n        });\r\n        // 声音\r\n        const audioWrap = document.querySelector('.audios-wrap');\r\n        const audioSrc = [];\r\n        for (let i = 0; i < 7; i++) {\r\n            audioSrc.push(require(`../../audios/syllable/${i + 1}.mp3`));\r\n        }\r\n        let hasSound = audioWrap.classList.contains('_on');\r\n        audioWrap.addEventListener('click', function () {\r\n            hasSound = !hasSound;\r\n            this.classList.toggle('_on');\r\n        });\r\n        // 落子\r\n        canvas.addEventListener('click', function (ev) {\r\n            const clientX = ev.clientX - applications.offset(canvasWrap).left;\r\n            const clientY = ev.clientY;\r\n            let nowX = null;\r\n            let nowY = null;\r\n            map.forEach(function (v) {\r\n                if (clientX >= v.left - v.radius && clientX <= v.left + v.radius && clientY >= v.top - v.radius && clientY <= v.top + v.radius) {\r\n                    // 判断点击范围是否是正确的区域\r\n                    if (v.type === 'transparent') {\r\n                        // 音乐\r\n                        if (hasSound) {\r\n                            let audioDom = applications.createElement({elementName: 'audio'});\r\n                            // audioDom.setAttribute('src', audioSrc[(game.blackNum + game.whiteNum) % audioSrc.length]);\r\n                            audioDom.setAttribute('src', audioSrc[tools.getRandom(0, audioSrc.length - 1)]);\r\n                            audioDom.play();\r\n                            audioDom = null;\r\n                        }\r\n                        drawCircle(v.left, v.top, v.radius, game.nextColor);\r\n                        v.type = game.nextColor;\r\n                        nowX = v.x;\r\n                        nowY = v.y;\r\n                        if (game.nextColor === 'black') {\r\n                            game.blackNum++;\r\n                            game.nextColor = 'white';\r\n                        } else {\r\n                            game.whiteNum++;\r\n                            game.nextColor = 'black';\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n            // 提示信息\r\n            drawTxt();\r\n            // 判断输赢\r\n            const result = ['', '', '', ''];\r\n            map.forEach(function (v) {\r\n                let str = '';\r\n                if (v.type === 'transparent') {\r\n                    str = 't';\r\n                }\r\n                if (v.type === 'black') {\r\n                    str = 'b';\r\n                }\r\n                if (v.type === 'white') {\r\n                    str = 'w';\r\n                }\r\n                if (v.x === nowX) { //  垂直\r\n                    result[0] += str;\r\n                }\r\n                if (v.y === nowY) { //  水平\r\n                    result[1] += str;\r\n                }\r\n                if (v.x + v.y === nowX + nowY) { // 左斜\r\n                    result[2] += str;\r\n                }\r\n                if (v.x - v.y === nowX - nowY) { // 右斜\r\n                    result[3] += str;\r\n                }\r\n            });\r\n            const victory = [\r\n                {\r\n                    k: 'bbbbb',\r\n                    v: '黑棋获胜',\r\n                },\r\n                {\r\n                    k: 'wwwww',\r\n                    v: '白棋获胜',\r\n                },\r\n                {\r\n                    k: 'tbbbbt',\r\n                    v: '黑棋获胜',\r\n                },\r\n                {\r\n                    k: 'twwwwt',\r\n                    v: '白棋获胜',\r\n                },\r\n            ];\r\n            result.forEach(function (v1) {\r\n                victory.forEach(function (v2) {\r\n                    if (v1.indexOf(v2.k) !== -1) {\r\n                        setTimeout(function () {\r\n                            alert(v2.v);\r\n                            window.location.reload();\r\n                        }, 60);\r\n                    }\r\n                });\r\n            });\r\n        });\r\n        canvasWrap.appendChild(canvas);\r\n    }\r\n}\r\n\r\nnew Sub();\r\n\n\n\n// WEBPACK FOOTER //\n// ./app/phone/assets/js/pages/game-wuziqi.js","var map = {\n\t\"./1.mp3\": 22,\n\t\"./2.mp3\": 23,\n\t\"./3.mp3\": 24,\n\t\"./4.mp3\": 25,\n\t\"./5.mp3\": 26,\n\t\"./6.mp3\": 27,\n\t\"./7.mp3\": 28\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) // check for number or string\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\treturn id;\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 21;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/phone/assets/audios/syllable ^\\.\\/.*\\.mp3$\n// module id = 21\n// module chunks = 4 5","module.exports = __webpack_public_path__ + \"audios/1.38e46759.mp3\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/phone/assets/audios/syllable/1.mp3\n// module id = 22\n// module chunks = 4 5","module.exports = __webpack_public_path__ + \"audios/2.5576c20e.mp3\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/phone/assets/audios/syllable/2.mp3\n// module id = 23\n// module chunks = 4 5","module.exports = __webpack_public_path__ + \"audios/3.25e1d33d.mp3\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/phone/assets/audios/syllable/3.mp3\n// module id = 24\n// module chunks = 4 5","module.exports = __webpack_public_path__ + \"audios/4.220478be.mp3\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/phone/assets/audios/syllable/4.mp3\n// module id = 25\n// module chunks = 4 5","module.exports = __webpack_public_path__ + \"audios/5.ab15dc12.mp3\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/phone/assets/audios/syllable/5.mp3\n// module id = 26\n// module chunks = 4 5","module.exports = __webpack_public_path__ + \"audios/6.44295654.mp3\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/phone/assets/audios/syllable/6.mp3\n// module id = 27\n// module chunks = 4 5","module.exports = __webpack_public_path__ + \"audios/7.c04a5503.mp3\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/phone/assets/audios/syllable/7.mp3\n// module id = 28\n// module chunks = 4 5"],"sourceRoot":""}