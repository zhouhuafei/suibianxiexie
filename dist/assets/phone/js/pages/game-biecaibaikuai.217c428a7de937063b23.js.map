{"version":3,"sources":["webpack:///js/pages/game-biecaibaikuai.217c428a7de937063b23.js","webpack:///./app/phone/assets/audios/syllable ^\\.\\/.*\\.mp3$","webpack:///./app/phone/assets/audios/syllable/1.mp3","webpack:///./app/phone/assets/audios/syllable/2.mp3","webpack:///./app/phone/assets/audios/syllable/3.mp3","webpack:///./app/phone/assets/audios/syllable/4.mp3","webpack:///./app/phone/assets/audios/syllable/5.mp3","webpack:///./app/phone/assets/audios/syllable/6.mp3","webpack:///./app/phone/assets/audios/syllable/7.mp3","webpack:///./app/phone/assets/js/pages/game-biecaibaikuai.js"],"names":["webpackJsonp","20","module","exports","__webpack_require__","webpackContext","req","webpackContextResolve","id","map","Error","./1.mp3","./2.mp3","./3.mp3","./4.mp3","./5.mp3","./6.mp3","./7.mp3","keys","Object","resolve","21","p","22","23","24","25","26","27","97","_toConsumableArray","arr","Array","isArray","i","arr2","length","from","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","_createClass","defineProperties","target","props","descriptor","defineProperty","key","protoProps","staticProps","Super","_Super","Sub","this","getPrototypeOf","apply","arguments","randomMap","result","randomRow","tools","getRandom","colNum","randomResult","random","col","indexOf","push","forEach","v","item","w","gap","h","move","requestAnimationFrame","ctx","clearRect","row","save","beginPath","fillStyle","rect","step","fill","closePath","restore","hp","setTimeout","alert","score","window","location","reload","drawTxt","index","splice","orientation","applications","canvasWrap","document","querySelector","offsetWidth","documentElement","clientHeight","canvas","createElement","elementName","attribute","width","height","appendChild","getContext","bg","font","textAlign","textBaseline","fillText","audioWrap","audioDom","audioSrc","hasSound","classList","contains","addEventListener","toggle","isPc","ev","preventDefault","stopPropagation","changedTouches","clientX","offset","left","clientY","isClickSuccess","setAttribute","play","style","display","98"],"mappings":"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","file":"js/pages/game-biecaibaikuai.217c428a7de937063b23.js","sourcesContent":["webpackJsonp([5],{\n\n/***/ 20:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar map = {\n\t\"./1.mp3\": 21,\n\t\"./2.mp3\": 22,\n\t\"./3.mp3\": 23,\n\t\"./4.mp3\": 24,\n\t\"./5.mp3\": 25,\n\t\"./6.mp3\": 26,\n\t\"./7.mp3\": 27\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) // check for number or string\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\treturn id;\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 20;\n\n/***/ }),\n\n/***/ 21:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"audios/1.38e46759.mp3\";\n\n/***/ }),\n\n/***/ 22:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"audios/2.5576c20e.mp3\";\n\n/***/ }),\n\n/***/ 23:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"audios/3.25e1d33d.mp3\";\n\n/***/ }),\n\n/***/ 24:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"audios/4.220478be.mp3\";\n\n/***/ }),\n\n/***/ 25:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"audios/5.ab15dc12.mp3\";\n\n/***/ }),\n\n/***/ 26:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"audios/6.44295654.mp3\";\n\n/***/ }),\n\n/***/ 27:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"audios/7.c04a5503.mp3\";\n\n/***/ }),\n\n/***/ 97:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n__webpack_require__(98);\nvar Super = __webpack_require__(3);\n\nvar Sub = function (_Super) {\n    _inherits(Sub, _Super);\n\n    function Sub() {\n        _classCallCheck(this, Sub);\n\n        return _possibleConstructorReturn(this, (Sub.__proto__ || Object.getPrototypeOf(Sub)).apply(this, arguments));\n    }\n\n    _createClass(Sub, [{\n        key: 'power',\n        value: function power() {\n            // 横屏的时候 90 -190 , 横屏的时候 0 180\n            if (window.orientation === 90 || window.orientation === -90) {\n                alert('请竖屏之后，刷新页面进行游戏');\n            }\n            var tools = this.tools;\n            var applications = this.applications;\n            var canvasWrap = document.querySelector('.canvas-wrap');\n            var w = canvasWrap.offsetWidth;\n            var h = document.documentElement.clientHeight;\n            var canvas = applications.createElement({\n                elementName: 'canvas',\n                attribute: {\n                    width: w,\n                    height: h\n                }\n            });\n            canvasWrap.appendChild(canvas);\n            var ctx = canvas.getContext('2d');\n            var col = 4;\n            var row = 4;\n            var gap = 10;\n            var step = 10;\n            var score = 0;\n            var hp = 100;\n            var item = {\n                w: (w - (col - 1) * gap) / col,\n                h: (h - (row - 1) * gap) / row,\n                bg: '#000'\n            };\n            var map = [];\n\n            function randomMap() {\n                var result = [];\n                var max = 5;\n                var randomRow = tools.getRandom(0, max); // 当随机数等于10的时候,一行两个\n                var colNum = 1;\n                if (randomRow === max) {\n                    colNum = 2;\n                }\n                var randomResult = [];\n                // 随机2个时,这2个不允许被随机到同一个位置\n                var random = tools.getRandom(0, col - 1); // 当前这个在这一行是第几个\n                while (randomResult.indexOf(random) === -1 && randomResult.length < colNum) {\n                    randomResult.push(random);\n                    random = tools.getRandom(0, col - 1); // 当前这个在这一行是第几个\n                }\n                randomResult.forEach(function (v) {\n                    result.push([v * item.w + v * gap, -item.h, item.w, item.h]);\n                });\n                return result;\n            }\n\n            var drawTxt = function drawTxt() {\n                ctx.save();\n                ctx.beginPath();\n                ctx.fillStyle = '#f00';\n                ctx.font = '12px 微软雅黑';\n                ctx.textAlign = 'center';\n                ctx.textBaseline = 'middle';\n                ctx.fillText('\\u79EF\\u5206:' + score + ',\\u751F\\u547D\\u503C:' + hp, w / 2, 20);\n                ctx.closePath();\n                ctx.restore();\n            };\n\n            function move() {\n                requestAnimationFrame(function () {\n                    if (map.length === 0) {\n                        map.push(randomMap());\n                    } else {\n                        if (map[map.length - 1][0][1] >= gap) {\n                            map.push(randomMap());\n                        }\n                    }\n                    ctx.clearRect(0, 0, w, h);\n                    map.forEach(function (row) {\n                        row.forEach(function (v) {\n                            ctx.save();\n                            ctx.beginPath();\n                            ctx.fillStyle = '#000';\n                            ctx.rect.apply(ctx, _toConsumableArray(v));\n                            v[1] += step;\n                            ctx.fill();\n                            ctx.closePath();\n                            ctx.restore();\n                        });\n                    });\n                    if (hp < 0) {\n                        setTimeout(function () {\n                            alert('\\u6E38\\u620F\\u7ED3\\u675F,\\u603B\\u79EF\\u5206' + score);\n                            window.location.reload();\n                        }, 60);\n                        return;\n                    }\n                    drawTxt();\n                    map.forEach(function (row, index) {\n                        if (row[0][1] >= h) {\n                            map.splice(index, 1);\n                            hp--;\n                        }\n                    });\n                    move();\n                });\n            }\n\n            // 声音\n            var audioWrap = document.querySelector('.audios-wrap');\n            var audioDom = applications.createElement({ elementName: 'audio' });\n            var audioSrc = [];\n            for (var i = 0; i < 7; i++) {\n                audioSrc.push(__webpack_require__(20)(\"./\" + (i + 1) + '.mp3'));\n            }\n            var hasSound = audioWrap.classList.contains('_on');\n            audioWrap.addEventListener('click', function () {\n                hasSound = !hasSound;\n                this.classList.toggle('_on');\n            });\n\n            var isPc = document.querySelector('html').classList.contains('g-pc');\n\n            // 踩黑块\n            canvas.addEventListener('' + (isPc ? 'click' : 'touchstart'), function (ev) {\n                ev.preventDefault();\n                ev.stopPropagation();\n                ev = isPc ? ev : ev.changedTouches[0];\n                var clientX = ev.clientX - applications.offset(canvasWrap).left;\n                var clientY = ev.clientY;\n                var isClickSuccess = false;\n                map.forEach(function (row, index) {\n                    row.forEach(function (v, i) {\n                        if (clientX >= v[0] && clientX <= v[0] + item.w && clientY >= v[1] && clientY <= v[1] + item.h) {\n                            row.splice(i, 1);\n                            score++;\n                            // 音乐\n                            if (hasSound) {\n                                audioDom.setAttribute('src', audioSrc[tools.getRandom(0, audioSrc.length - 1)]);\n                                audioDom.play();\n                            }\n                            isClickSuccess = true;\n                        }\n                    });\n                    if (row.length === 0) {\n                        map.splice(index, 1);\n                    }\n                });\n                if (!isClickSuccess) {\n                    hp--;\n                    if (hp < 0) {\n                        alert('\\u6E38\\u620F\\u7ED3\\u675F,\\u603B\\u79EF\\u5206' + score);\n                        window.location.reload();\n                    }\n                }\n            });\n\n            // 游戏开始\n            document.querySelector('.game-start').addEventListener('click', function () {\n                this.style.display = 'none';\n                audioWrap.style.display = 'none';\n                move();\n            });\n        }\n    }]);\n\n    return Sub;\n}(Super);\n\nnew Sub();\n\n/***/ }),\n\n/***/ 98:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ })\n\n},[97]);\n\n\n// WEBPACK FOOTER //\n// js/pages/game-biecaibaikuai.217c428a7de937063b23.js","var map = {\n\t\"./1.mp3\": 21,\n\t\"./2.mp3\": 22,\n\t\"./3.mp3\": 23,\n\t\"./4.mp3\": 24,\n\t\"./5.mp3\": 25,\n\t\"./6.mp3\": 26,\n\t\"./7.mp3\": 27\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) // check for number or string\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\treturn id;\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 20;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/phone/assets/audios/syllable ^\\.\\/.*\\.mp3$\n// module id = 20\n// module chunks = 4 5","module.exports = __webpack_public_path__ + \"audios/1.38e46759.mp3\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/phone/assets/audios/syllable/1.mp3\n// module id = 21\n// module chunks = 4 5","module.exports = __webpack_public_path__ + \"audios/2.5576c20e.mp3\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/phone/assets/audios/syllable/2.mp3\n// module id = 22\n// module chunks = 4 5","module.exports = __webpack_public_path__ + \"audios/3.25e1d33d.mp3\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/phone/assets/audios/syllable/3.mp3\n// module id = 23\n// module chunks = 4 5","module.exports = __webpack_public_path__ + \"audios/4.220478be.mp3\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/phone/assets/audios/syllable/4.mp3\n// module id = 24\n// module chunks = 4 5","module.exports = __webpack_public_path__ + \"audios/5.ab15dc12.mp3\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/phone/assets/audios/syllable/5.mp3\n// module id = 25\n// module chunks = 4 5","module.exports = __webpack_public_path__ + \"audios/6.44295654.mp3\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/phone/assets/audios/syllable/6.mp3\n// module id = 26\n// module chunks = 4 5","module.exports = __webpack_public_path__ + \"audios/7.c04a5503.mp3\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./app/phone/assets/audios/syllable/7.mp3\n// module id = 27\n// module chunks = 4 5","require('../../scss/pages/game-biecaibaikuai.scss');\nconst Super = require('../pages-super/super');\n\nclass Sub extends Super {\n    power() {\n        // 横屏的时候 90 -190 , 横屏的时候 0 180\n        if (window.orientation === 90 || window.orientation === -90) {\n            alert('请竖屏之后，刷新页面进行游戏');\n        }\n        const tools = this.tools;\n        const applications = this.applications;\n        const canvasWrap = document.querySelector('.canvas-wrap');\n        const w = canvasWrap.offsetWidth;\n        const h = document.documentElement.clientHeight;\n        const canvas = applications.createElement({\n            elementName: 'canvas',\n            attribute: {\n                width: w,\n                height: h,\n            },\n        });\n        canvasWrap.appendChild(canvas);\n        const ctx = canvas.getContext('2d');\n        const col = 4;\n        const row = 4;\n        const gap = 10;\n        const step = 10;\n        let score = 0;\n        let hp = 100;\n        const item = {\n            w: (w - (col - 1) * gap) / col,\n            h: (h - (row - 1) * gap) / row,\n            bg: '#000',\n        };\n        const map = [];\n\n        function randomMap() {\n            const result = [];\n            const max = 5;\n            const randomRow = tools.getRandom(0, max); // 当随机数等于10的时候,一行两个\n            let colNum = 1;\n            if (randomRow === max) {\n                colNum = 2;\n            }\n            const randomResult = [];\n            // 随机2个时,这2个不允许被随机到同一个位置\n            let random = tools.getRandom(0, col - 1); // 当前这个在这一行是第几个\n            while (randomResult.indexOf(random) === -1 && randomResult.length < colNum) {\n                randomResult.push(random);\n                random = tools.getRandom(0, col - 1); // 当前这个在这一行是第几个\n            }\n            randomResult.forEach(function (v) {\n                result.push([v * item.w + v * gap, -item.h, item.w, item.h]);\n            });\n            return result;\n        }\n\n        const drawTxt = function () {\n            ctx.save();\n            ctx.beginPath();\n            ctx.fillStyle = '#f00';\n            ctx.font = '12px 微软雅黑';\n            ctx.textAlign = 'center';\n            ctx.textBaseline = 'middle';\n            ctx.fillText(`积分:${score},生命值:${hp}`, w / 2, 20);\n            ctx.closePath();\n            ctx.restore();\n        };\n\n        function move() {\n            requestAnimationFrame(() => {\n                if (map.length === 0) {\n                    map.push(randomMap());\n                } else {\n                    if (map[map.length - 1][0][1] >= gap) {\n                        map.push(randomMap());\n                    }\n                }\n                ctx.clearRect(0, 0, w, h);\n                map.forEach(function (row) {\n                    row.forEach(function (v) {\n                        ctx.save();\n                        ctx.beginPath();\n                        ctx.fillStyle = '#000';\n                        ctx.rect(...v);\n                        v[1] += step;\n                        ctx.fill();\n                        ctx.closePath();\n                        ctx.restore();\n                    });\n                });\n                if (hp < 0) {\n                    setTimeout(function () {\n                        alert(`游戏结束,总积分${score}`);\n                        window.location.reload();\n                    }, 60);\n                    return;\n                }\n                drawTxt();\n                map.forEach(function (row, index) {\n                    if (row[0][1] >= h) {\n                        map.splice(index, 1);\n                        hp--;\n                    }\n                });\n                move();\n            });\n        }\n\n        // 声音\n        const audioWrap = document.querySelector('.audios-wrap');\n        const audioDom = applications.createElement({elementName: 'audio'});\n        const audioSrc = [];\n        for (let i = 0; i < 7; i++) {\n            audioSrc.push(require(`../../audios/syllable/${i + 1}.mp3`));\n        }\n        let hasSound = audioWrap.classList.contains('_on');\n        audioWrap.addEventListener('click', function () {\n            hasSound = !hasSound;\n            this.classList.toggle('_on');\n        });\n\n        const isPc = document.querySelector('html').classList.contains('g-pc');\n\n        // 踩黑块\n        canvas.addEventListener(`${isPc ? 'click' : 'touchstart'}`, function (ev) {\n            ev.preventDefault();\n            ev.stopPropagation();\n            ev = isPc ? ev : ev.changedTouches[0];\n            const clientX = ev.clientX - applications.offset(canvasWrap).left;\n            const clientY = ev.clientY;\n            let isClickSuccess = false;\n            map.forEach(function (row, index) {\n                row.forEach(function (v, i) {\n                    if (clientX >= v[0] && clientX <= v[0] + item.w && clientY >= v[1] && clientY <= v[1] + item.h) {\n                        row.splice(i, 1);\n                        score++;\n                        // 音乐\n                        if (hasSound) {\n                            audioDom.setAttribute('src', audioSrc[tools.getRandom(0, audioSrc.length - 1)]);\n                            audioDom.play();\n                        }\n                        isClickSuccess = true;\n                    }\n                });\n                if (row.length === 0) {\n                    map.splice(index, 1);\n                }\n            });\n            if (!isClickSuccess) {\n                hp--;\n                if (hp < 0) {\n                    alert(`游戏结束,总积分${score}`);\n                    window.location.reload();\n                }\n            }\n        });\n\n        // 游戏开始\n        document.querySelector('.game-start').addEventListener('click', function () {\n            this.style.display = 'none';\n            audioWrap.style.display = 'none';\n            move();\n        });\n    }\n}\n\nnew Sub();\n\n\n\n// WEBPACK FOOTER //\n// ./app/phone/assets/js/pages/game-biecaibaikuai.js"],"sourceRoot":""}