"use strict";!function t(o,e,r){function n(i,a){if(!e[i]){if(!o[i]){var l="function"==typeof require&&require;if(!a&&l)return l(i,!0);if(s)return s(i,!0);throw new Error("Cannot find module '"+i+"'")}var c=e[i]={exports:{}};o[i][0].call(c.exports,function(t){var e=o[i][1][t];return n(e||t)},c,c.exports,t,o,e,r)}return e[i].exports}for(var s="function"==typeof require&&require,i=0;i<r.length;i++)n(r[i]);return n}({1:[function(t,o,e){function r(t){this.opts=n({defaults:{callback:{uploadProgress:function(){},uploadLoad:function(){},loadStart:function(){},progress:function(){},error:function(){},abort:function(){},load:function(){},success:function(){},fail:function(){},loadEnd:function(){},complete:function(){},timeout:function(){}},config:{type:"post",url:"",dataType:"json",async:!0,timeout:5e3,mark:"#"},data:{}},inherits:t}),this.xhr=new XMLHttpRequest,this.xhr.timeout=this.opts.config.timeout,this.init()}var n=t("../tools/extend");r.prototype.init=function(){this.events(),this.open(),this.send()},r.prototype.open=function(){var t=this.opts;if("get"==t.config.type.toLowerCase()){var o="",e=0,r=t.data;if(r)for(var n in r)r.hasOwnProperty(n)&&(o+=0==e?n+"="+r[n]:"&"+n+"="+r[n],e++);var s=t.config.url+t.config.mark+o;this.xhr.open(t.config.type,s)}else{if("post"!=t.config.type.toLowerCase())return console.log("仅支持get和post请求"),!1;this.xhr.open(t.config.type,t.config.url)}},r.prototype.send=function(){var t=this.opts,o=t.data;if("get"==t.config.type.toLowerCase())this.xhr.send(null);else{if("post"!=t.config.type.toLowerCase())return console.log("仅支持get和post请求"),!1;if(o)if("formdata"==Object.prototype.toString.call(o).slice(8,-1).toLocaleLowerCase())this.xhr.send(o);else{var e=new FormData;for(var r in o)o.hasOwnProperty(r)&&e.append(r,o[r]);this.xhr.send(e)}else this.xhr.send(null)}},r.prototype.events=function(){var t=this;this.xhr.upload.addEventListener("progress",function(o){t.uploadProgress(),console.log(o,"uploadProgress")}),this.xhr.upload.addEventListener("load",function(o){t.uploadLoad(),console.log(o,"uploadLoad")}),this.xhr.addEventListener("loadstart",function(o){t.loadStart(),console.log(o,"loadStart")}),this.xhr.addEventListener("progress",function(o){t.progress(),console.log(o,"progress")}),this.xhr.addEventListener("error",function(o){t.error(),console.log(o,"error")}),this.xhr.addEventListener("abort",function(o){t.abort(),console.log(o,"abort")}),this.xhr.addEventListener("load",function(o){t.load(o),console.log(o,"load",999)}),this.xhr.addEventListener("loadend",function(o){t.loadEnd(),console.log(o,"loadend")}),this.xhr.addEventListener("timeout",function(o){t.timeout(),console.log(o,"timeout")})},r.prototype.uploadProgress=function(){this.opts.callback.uploadProgress()},r.prototype.uploadLoad=function(){this.opts.callback.uploadLoad()},r.prototype.loadStart=function(){this.opts.callback.loadStart()},r.prototype.progress=function(){this.opts.callback.progress()},r.prototype.error=function(){this.opts.callback.error()},r.prototype.abort=function(){this.opts.callback.abort()},r.prototype.load=function(){this.opts.callback.load()},r.prototype.success=function(){this.opts.callback.success()},r.prototype.fail=function(){this.opts.callback.fail()},r.prototype.loadEnd=function(){this.opts.callback.loadEnd(),this.complete()},r.prototype.complete=function(){this.opts.callback.complete()},r.prototype.timeout=function(){this.opts.callback.timeout()},r.prototype.triggerAbort=function(){this.xhr.abort?this.xhr.abort():console.log("浏览器不支持xhr2的abort")},o.exports=r},{"../tools/extend":2}],2:[function(t,o,e){function r(t){var o=t||{};o.defaults=o.defaults||{},o.inherits=o.inherits||{},o.isDeep=0!=o.isDeep||o.isDeep;var e=Object.prototype.toString.call(o.defaults).slice(8,-1).toLowerCase();if(e==Object.prototype.toString.call(o.inherits).slice(8,-1).toLowerCase()&&o.isDeep)if("object"==e||"array"==e){for(var n in o.inherits)if(o.inherits.hasOwnProperty(n)){var s=Object.prototype.toString.call(o.defaults[n]).slice(8,-1).toLowerCase(),i=Object.prototype.toString.call(o.inherits[n]).slice(8,-1).toLowerCase();s!=i||!o.isDeep||"object"!=s&&"array"!=s?o.defaults[n]=o.inherits[n]:r({defaults:o.defaults[n],inherits:o.inherits[n]})}}else o.defaults=o.inherits;else o.defaults=o.inherits;return o.defaults}o.exports=r},{}]},{},[1]);